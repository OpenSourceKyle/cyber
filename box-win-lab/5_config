#!/bin/bash
# Shared configuration and functions for VM snapshot management scripts
# This file contains the snapshot name and common utility functions

SNAPSHOT_NAME="gold_image"

# Function to get the snapshot list
# Usage: get_snapshot_list
# Sets global variable SNAPSHOT_LIST
get_snapshot_list() {
  SNAPSHOT_LIST=$(vagrant snapshot list 2>/dev/null || echo "")
}

# Function to check if a snapshot exists
# Usage: snapshot_exists [snapshot_name]
# Returns 0 if exists, 1 if not
# If no argument provided, uses SNAPSHOT_NAME
snapshot_exists() {
  local snapshot_to_check="${1:-$SNAPSHOT_NAME}"
  get_snapshot_list
  echo "$SNAPSHOT_LIST" | grep -qE "^[[:space:]]*${snapshot_to_check}[[:space:]]*$"
}

# Function to display snapshot list with header
# Usage: display_snapshot_list
display_snapshot_list() {
  echo "[*] Checking current snapshots..."
  get_snapshot_list
  echo "$SNAPSHOT_LIST"
  echo
}

